<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" type="text/css" href="../css/EstiloWeb.css">
	<title> Formulario </title>
	<script type="text/javascript">
		/*
		window.onload = function() {
		  cargarResultados();
		};
		function cargarResultados(){
			var listaResultados = sessionStorage.getItem('respuestas');
    		//alert(listaResultados);
			console.log("RESULTADOS: "+listaResultados);
			//sessionStorage.clear();
		}*/

		var listaResultados = JSON.parse(sessionStorage.getItem('respuestas'));
		console.log("RESULTADOS: "+listaResultados);

		function cargarTabla(){
			console.log("RESULTADOS2: "+listaResultados);
			var puntos = 0;
			var tabla = document.getElementById("tablaRes");
			/*var fila = tabla.insertRow(-1);
			var cell1 = fila.insertCell(0);
			var cell2 = fila.insertCell(1);
			var cell3 = fila.insertCell(2);

			cell2.className = "correcta";
			cell1.innerHTML = "NEW CELL1";
			cell2.innerHTML = "NEW CELL2";
			cell3.innerHTML = "NEW CELL3";*/
			var contador1=1;
			var contador2=1;
			console.log("RESULTADOS2: "+listaResultados.length);
			for(var i=0;i<listaResultados.length;i++){
				console.log("RESULTADOS3: "+listaResultados[i]);
				var fila = tabla.insertRow(-1);
				var cell1 = fila.insertCell(0);
				var cell2 = fila.insertCell(1);
				var cell3 = fila.insertCell(2);
				var cell4 = fila.insertCell(3);
				cell1.innerHTML = "P"+contador2+contador1;
				cell2.innerHTML = listaResultados[i];

				if(listaResultados[i]=="-"){
					fila.className="correcta";
					cell2.innerHTML = "Correcta";
					cell3.innerHTML = 1;
					puntos++;
					if(contador2==2){
						puntos++;
						cell3.innerHTML = 2;
					}
				}else{
					fila.className="incorrecta";
					cell2.innerHTML = "Incorrecta";
					cell3.innerHTML = 0;
					cell4.innerHTML = listaResultados[i];
				}



				
				if(contador1==4 && contador2==1){
					contador1=1;
					contador2=2;
				}else if(contador1==1 && contador2==2){
					contador1=1;
					contador2=3;
				}else if(contador1==4 && contador2==3){
					contador1=1;
					contador2=4;
				}else{
					contador1++;
				}

			}
			var boton = document.getElementById("botonP3");
			boton.style.display="none";

			var nota = document.getElementById("nota");
			nota.style.display="block";

			var puntuacion = document.getElementById("puntuacion");
			nota.innerHTML=puntos+"/13="+truncateDecimals((puntos/13*10),2);
			
		}

		truncateDecimals = function (number, digits) {
		    var multiplier = Math.pow(10, digits),
		        adjustedNum = number * multiplier,
		        truncatedNum = Math[adjustedNum < 0 ? 'ceil' : 'floor'](adjustedNum);

		    return truncatedNum / multiplier;
		};
		

	</script>
</head>

<body>

	<div class="header">
		<span class="tituloPrincipal">WEB: Grupo 5</span>
	</div>
	<nav id="menu2">
		<ul>
		  <li><a href="../index.html#inicio">Inicio</a></li>  
		</ul>
	</nav>

	<div class=zona>
		<br><br><br>
		<h1 id="inicio"> Resultados del formulario de autoevaluación </h1>
		<p>  </p>
		<p>  </p>

		 <table class="tablaResultados" id="tablaRes">
		    <tr>
		      <th>Pregunta</th>
		      <th>Resultado</th>
		      <th>Puntos</th>
		      <th>Explicación</th>
		    </tr>
	  	</table>

		<p>  </p>
		
		<div class="botonEmpezar">
			<button class="botonFormulario" id="botonP3" onclick="cargarTabla()" type="button">Mostrar Resultados</button>
		</div>
		<div class="nota" id="nota">
			<p id="puntuacion"></p>
		</div>

		<p>  </p>

		<p>Puedes hacer click en <a href="../index.html#inicio">Inicio</a> para volver a la p&aacute;gina principal.</p>
	
	</div>
<!--
	<div class="footer">
	    <h3>M&aacute;ster de Profesorado de Secundaria</h3>
	</div>
-->

	<div class="filaPie">
	  <div class="columnaPie izda">
	    <h3></h3>
	  </div>
	  <div class="columnaPie centro">
	    <h3>M&aacute;ster de Profesorado de Secundaria</h3>
	  </div>
	  <div class="columnaPie dcha">
	  	<a href="https://www.urjc.es">
	    	<img src="../img/urjc.png" alt="HTML5 Doctor Logo" height="50" />
		</a>
	  </div>
	</div>


</body>
</html>